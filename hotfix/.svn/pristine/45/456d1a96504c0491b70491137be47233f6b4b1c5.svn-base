/*! LPS4.0 2016-09-28
*/
function load_provid(){var e=$("#default_p_c").val();void 0!=e&&(zzarr=e.split("_"),""==zzarr[0]?($("#id_prov").children().eq(0).attr("selected","selected"),city_list($("#id_prov").val())):($("#id_prov").children('[value="'+zzarr[0]+'"]').attr("selected","selected"),city_list(zzarr[0])),$("#id_prov").next().remove(),$("#id_prov").iSimulateSelect({width:194,height:200,selectBoxCls:"personal_info_selectD",optionCls:"personal_info_selectD_Op"}))}function city_list(e){$.ajax({type:"GET",url:"/user/city/list/",data:{provid:e},dataType:"json",success:function(e){var e=e.cityid,a="";for(var s in e)a+='<option value="'+e[s][0]+'">'+e[s][1]+"</option>";var t=$("#id_city");t.html(a),""==zzarr[0]?t.children().eq(0).attr("selected","selected"):t.children('[value="'+zzarr[1]+'"]').attr("selected","selected"),t.next().remove(),t.iSimulateSelect({width:194,height:200,selectBoxCls:"personal_info_selectD",optionCls:"personal_info_selectD_Op"})}})}function student_info_submit(data){$.ajax({type:"POST",async:!1,url:"/lps3/student/student_info_submit/",data:data,dataType:"json",success:function(data){var data=eval(data);data.status?window.location.reload():layer.msg(data.error)}})}function contract_submit(data){$.ajax({type:"POST",url:"/lps3/student/contract_submit/",data:data,dataType:"json",success:function(data){var data=eval(data);data.status&&window.location.reload()}})}function checkPhone(e){var a=/^1[358]\d{9}$|^147\d{8}$|^176\d{8}$/;return a.test(e)?!0:!1}function isEmail(e){var a=/^[-_A-Za-z0-9]+@([_A-Za-z0-9]+\.)+[A-Za-z0-9]{2,3}$/;return a.test(e)?!0:!1}function isnum(e){return/^[0-9]*$/.test(e)?!0:!1}$(function(){load_provid(),$("#id_prov").change(function(){var e=$("#id_prov").val();console.log(e),city_list(e)}),$("#student_info_submit").click(function(){var e="不能为空",a=$("#real_name").val().trim();if(!a)return layer.tips(e,$("#real_name"),{tips:[2,"#68c8b6"]}),$("#real_name").focus(),void 0;var s=$("#mobile").val().trim();if(console.log(s),!s||!checkPhone(s))return checkPhone(s)||(e="手机格式错误"),layer.tips(e,$("#mobile"),{tips:[2,"#68c8b6"]}),$("#mobile").focus(),void 0;var t=$("#qq").val().trim();if(!(t&&isnum(t)&&t.length>4&&13>t.length))return isnum(t)||(e="QQ格式不对"),t.length>4&&13>t.length||(e="QQ格式不对"),layer.tips(e,$("#qq"),{tips:[2,"#68c8b6"]}),$("#qq").focus(),void 0;var i=$("#email").val().trim();if(!i||!isEmail(i))return isEmail(i)||(e="邮箱格式不正确"),layer.tips(e,$("#email"),{tips:[2,"#68c8b6"]}),$("#email").focus(),void 0;var o=$("#address").val().trim();if(!o)return layer.tips(e,$("#address"),{tips:[2,"#68c8b6"]}),$("#address").focus(),void 0;var n={real_name:a,qq:t,email:i,mobile:s,address:o,city:$("#id_city").val(),study_goal_opt:$("#study_goal_opt").val(),study_base_opt:$("#study_base_opt").val()};student_info_submit(n)}),$("#myAgreement2_submit").click(function(){var e=$("#myAgreement2_checkbox").context.checked;if(0==e)return layer.tips("请勾选同意后方可提交",$("#myAgreement2_checkbox").parent(),{tips:[2,"#68c8b6"]}),void 0;var a={checked:!0,class_id:class_id,contract:"入学"};contract_submit(a)}),$("#myAgreement2_checkbox").click(function(){$(this).context.checked?$("#myAgreement2_submit").removeClass("greyBG"):$("#myAgreement2_submit").addClass("greyBG")}),$("#myAgreement3_submit").click(function(){var e=$("#myAgreement3_checkbox").context.checked;if(0==e)return layer.tips("请勾选后方可提交",$("#myAgreement3_checkbox").parent(),{tips:[2,"#68c8b6"]}),void 0;var a={checked:!0,class_id:class_id,contract:"服务"};contract_submit(a)}),$("#myAgreement3_checkbox").click(function(){$(this).context.checked?$("#myAgreement3_submit").removeClass("greyBG"):$("#myAgreement3_submit").addClass("greyBG")}),$("#myAgreement_submit").click(function(){var e=$("#myAgreement_checkbox").context.checked;if(0==e)return layer.tips("请勾选同意后方可提交",$("#myAgreement_checkbox").parent(),{tips:[2,"#68c8b6"]}),void 0;var a={checked:!0,class_id:class_id,contract:"就业"};contract_submit(a)}),$("#myAgreement_checkbox").click(function(){$(this).context.checked?$("#myAgreement_submit").removeClass("greyBG"):$("#myAgreement_submit").addClass("greyBG")})});var zzarr;